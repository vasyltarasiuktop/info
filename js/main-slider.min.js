const slider=()=>{const e=document.querySelector(".js-slider-track"),t=document.querySelector(".js-slider"),n=document.querySelector(".js-slider"),s=document.querySelectorAll(".js-slide"),o=document.querySelectorAll(".js-dot");document.querySelector(".js-dots");let r=s[0].offsetWidth+16,i=(o[0].offsetWidth,0),d=0,c=0,a=0,l=0,u=0,m=0,v=!1,f=!1,L=!0,h=!0,p=0,x=0,y=s.length-1*r,E=.35*s[0].offsetWidth,g=/([-0-9.]+(?=px))/,b=function(){return-1!==event.type.search("touch")?event.touches[0]:event},j=function(){h&&(e.style.transition="transform .5s"),e.style.transform=`translate3d(-${i*r}px, 0px, 0px)`;for(let e=0;e<o.length;e++)o[e].classList.remove("o-active",o[e].classList.contains("o-active"));o[i].classList.add("o-active")},q=function(){let n=b();L&&(h=!0,p=(i+1)*-r,x=(i-1)*-r,d=c=n.clientX,l=n.clientY,e.style.transition="",document.addEventListener("touchmove",S),document.addEventListener("mousemove",S),document.addEventListener("touchend",W),document.addEventListener("mouseup",W),t.classList.remove("grab"),t.classList.add("grabbing"))},S=function(){let t=b(),n=+e.style.transform.match(g)[0];if(a=c-t.clientX,c=t.clientX,u=l-t.clientY,l=t.clientY,!v&&!f){let e=Math.abs(u);e>7||0===a?(f=!0,L=!1):e<7&&(v=!0)}if(v){if(0===i){if(d<c)return void X(n,0);L=!0}if(i===s.length-1){if(d>c)return void X(n,y);L=!0}if(d>c&&n<p||d<c&&n>x)return void Y();e.style.transform=`translate3d(${n-a}px, 0px, 0px)`}},W=function(){m=d-c,f=!1,v=!1,document.removeEventListener("touchmove",S),document.removeEventListener("mousemove",S),document.removeEventListener("touchend",W),document.removeEventListener("mouseup",W),t.classList.add("grab"),t.classList.remove("grabbing"),L?(Math.abs(m)>E&&(d<c?i--:d>c&&i++),d!==c?(L=!1,j()):L=!0):L=!0},X=function(t,n){t>=n&&t>n&&(e.style.transform=`translate3d(${n}px, 0px, 0px)`),L=!1},Y=function(){h=!1,W(),L=!0};e.style.transform="translate3d(0px, 0px, 0px)",t.classList.add("grab"),e.addEventListener("transitionend",(()=>L=!0)),n.addEventListener("touchstart",q),n.addEventListener("mousedown",q);for(let e=0;e<o.length;e++)o[e].addEventListener("click",(()=>{i=e,j()}))};export default slider;